@model List<Product>

@{
    ViewData["Title"] = "Products";
}


<!-- Header with Search Box -->
<header class="bg-dark p-3">
    <style>
        .htmx-indicator {
            display: none;
        }

        .htmx-request .htmx-indicator {
            display: inline;
        }

        .htmx-request.htmx-indicator {
            display: inline;
        }
    </style>
    <div class="container">
        <input type="text"
               class="form-control"
               style="width: 450px;"
               placeholder="Search products..."
               name="search"
               hx-get="/Home/Index"
               hx-trigger="keyup changed delay:300ms"
               hx-indicator="#spinner"
               hx-target="#table-body" />
    </div>
    
</header>

<div class="container mt-4">

    <!-- Add New Form Partial -->
    <div id="add-new-form" class="mb-4">
        @await Html.PartialAsync("_AddNewForm", new Product())
    </div>
    <img id="spinner" class="htmx-indicator" src="~/images/spinner.png" alt="Loading...">
    <!-- Products Table -->
    <table class="table table-bordered table-striped">
        <thead class="table-dark">
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Price</th>
                <th>Category</th>
                <th>Created At</th>
                <th>Updated At</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="table-body">
            @await Html.PartialAsync("_ProductRows", Model ?? new List<Product>())
        </tbody>
    </table>

   

</div>
